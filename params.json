{
  "name": "Ollu-cybersaints-lab-documentation",
  "tagline": "",
  "body": "#Lab Hardware / Layout\r\n2 Unmanaged trednet gigabit switches\r\n2 Poweredge T300 Server\r\n    1 Intel Core 2 Duo E6305 @ 1.86GHz\r\n    24GB Ram\r\n    4 250GB HDD's > Raid 0\r\n1 Poweredge T605 Server\r\n    2 Quad-Core AMD Opteron 2350\r\n    32GB Ram\r\n    4 250GB HDD's > Raid 0\r\n#####Lab Hardware / Layout Image\r\n\r\n#Lab Software / Layout\r\nEach Poweredge server is running ESX 6.0\r\nA virtual Vcenter Server Appliance is running on the T605\r\nA virtual Debian DHCP/Apache2 server is running DNSMASQ\r\nThe rest of the VM's are VM's from www.Vulnhub.com\r\n___\r\n#Configuration detials\r\nEach ESX host has 3 scripts running on it:\r\n    Revert_Snapshots.sh, Create_Snapshots.sh, Script.sh\r\n    All 3 are stored in the /root directory of the ESX host.\r\nThe DHCP/Apache2 server has 2 scripts on it:\r\n    IP_TO_MAC.sh and Order.sh\r\n    Both are stored in the /root directory of the VM.\r\n___\r\n\r\n#Scripts\r\n##ESX\r\nRevert_Snapshots.sh\r\n    VMIDS=$(vim-cmd vmsvc/getallvms | grep -v 01_Vcenter | grep -v 02_DNS_DHCP | awk '{print $1 }' | grep -v Vmid)\r\n    for VMID in $VMIDS\r\n    do\r\n            case $VMID in\r\n                    ''|*[!0-9]*);;\r\n                    *)\r\n                    vim-cmd vmsvc/get.snapshot $VMID | grep \"Fresh Install\"\r\n                    if [ $? -eq 0 ]; then\r\n                            echo $(vim-cmd vmsvc/get.summary $VMID | grep name)\r\n                            SnapShotID=$(vim-cmd vmsvc/snapshot.get $VMID | grep \"Fresh Install\" -A 1 | grep \"Id\" | awk '{print $4}')\r\n                            vim-cmd vmsvc/snapshot.revert $VMID $SnapShotID 0\r\n                            vim-cmd vmsvc/power.on $VMID\r\n                    fi\r\n                    ;;\r\n            esac\r\n    done\r\nCreate_Snapshots.sh\r\n    VMIDS=$(vim-cmd vmsvc/getallvms | grep -v 01_Vcenter | grep -v 02_DNS_DHCP | awk '{print $1 }' | grep -v Vmid)\r\n    for VMID in $VMIDS\r\n    do\r\n            case $VMID in\r\n                    ''|*[!0-9]*);;\r\n                    *)\r\n                    vim-cmd vmsvc/get.snapshot $VMID | grep \"Fresh Install\" > /dev/null\r\n                    if [ ! $? -eq 0 ]; then\r\n                            vim-cmd vmsvc/snapshot.create $VMID \"Fresh Install\"\r\n                    fi\r\n                    ;;\r\n            esac\r\n    done\r\nScript.sh\r\n    VMIDS=$(vim-cmd vmsvc/getallvms | awk '{print $1 }' | grep -v Vmid)\r\n    echo \"\" > MAC_ADDRESSES\r\n    for VMID in $VMIDS\r\n    do\r\n            case $VMID in\r\n                    ''|*[!0-9]*);;\r\n                    *)\r\n                    MacAddress=$(vim-cmd vmsvc/device.getdevices $VMID | grep macAddress | sed 's/macAddress = \"//' | sed 's/\",//' | sed -r 's/\\s+//g')\r\n                    VmName=$(vim-cmd vmsvc/get.summary $VMID | grep name | sed 's/name = \"//' | sed 's/\",//' | sed -r 's/\\s+//g')\r\n                    echo $MacAddress        $VmName >> MAC_ADDRESSES\r\n                    ;;\r\n            esac\r\n    done\r\n##DHCP/Apache2\r\nIP_TO_MAC.sh\r\n\r\nOrder.sh\r\n\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}